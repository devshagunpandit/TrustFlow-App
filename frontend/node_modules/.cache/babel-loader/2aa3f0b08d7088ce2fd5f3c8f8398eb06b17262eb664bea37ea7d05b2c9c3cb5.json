{"ast":null,"code":"var _jsxFileName = \"/workspaces/TrustFlow-App/frontend/src/components/ProfileModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Camera, Mail, User, Loader2, AlertCircle } from 'lucide-react';\nimport { supabase } from '@/lib/supabase';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\n\n// Helper to ignore the specific Codespace/Proxy crash\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ignoreStreamError = err => {\n  const msg = String((err === null || err === void 0 ? void 0 : err.message) || err).toLowerCase();\n  return msg.includes(\"body stream\") || msg.includes(\"failed to execute\") || msg.includes(\"json\") || msg.includes(\"text\");\n};\nconst ProfileModal = ({\n  isOpen,\n  onClose,\n  user,\n  profile,\n  onProfileUpdate\n}) => {\n  _s();\n  const [isEditing, setIsEditing] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // Form Data\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState('');\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [emailError, setEmailError] = useState('');\n\n  // Email Change State\n  const [isEmailChangePending, setIsEmailChangePending] = useState(false);\n  const [otp, setOtp] = useState('');\n  const [newEmailToVerify, setNewEmailToVerify] = useState('');\n  const fileInputRef = useRef(null);\n  const {\n    toast\n  } = useToast();\n\n  // Fix: Remove 'user' and 'profile' from dependencies.\n  // This ensures the form only resets when you OPEN the modal, \n  // not when Supabase updates in the background.\n  useEffect(() => {\n    if (isOpen) {\n      setFullName((profile === null || profile === void 0 ? void 0 : profile.full_name) || '');\n      setEmail((user === null || user === void 0 ? void 0 : user.email) || '');\n      setAvatarUrl((profile === null || profile === void 0 ? void 0 : profile.avatar_url) || '');\n      setAvatarFile(null);\n      setIsEditing(false);\n      setIsEmailChangePending(false);\n      setOtp('');\n      setEmailError('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  const handleFileSelect = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setAvatarFile(file);\n      setAvatarUrl(URL.createObjectURL(file));\n    }\n  };\n  const handleSaveChanges = async () => {\n    setLoading(true);\n    setEmailError('');\n    try {\n      // --- PART 1: UPLOAD PHOTO ---\n      let uploadedAvatarUrl = avatarUrl;\n      if (avatarFile) {\n        const fileExt = avatarFile.name.split('.').pop();\n        const fileName = `${user.id}-${Math.random()}.${fileExt}`;\n        const filePath = `${fileName}`;\n        try {\n          const {\n            error: uploadError\n          } = await supabase.storage.from('avatars').upload(filePath, avatarFile);\n          if (uploadError) throw uploadError;\n        } catch (err) {\n          if (!ignoreStreamError(err)) throw err;\n        }\n        const {\n          data: {\n            publicUrl\n          }\n        } = supabase.storage.from('avatars').getPublicUrl(filePath);\n        uploadedAvatarUrl = publicUrl;\n      }\n\n      // --- PART 2: SAVE PROFILE (Name/Photo) ---\n      const updates = {\n        id: user.id,\n        full_name: fullName,\n        avatar_url: uploadedAvatarUrl,\n        updated_at: new Date()\n      };\n      try {\n        const {\n          error\n        } = await supabase.from('profiles').upsert(updates).select();\n        if (error) throw error;\n      } catch (err) {\n        if (!ignoreStreamError(err)) throw err;\n      }\n\n      // --- PART 3: HANDLE EMAIL CHANGE ---\n      if (email !== user.email) {\n        // IMPORTANT: We use a dedicated try/catch here to FORCE the UI to switch\n        try {\n          const {\n            error\n          } = await supabase.auth.updateUser({\n            email: email\n          });\n          if (error) throw error;\n        } catch (err) {\n          // If it's the \"Stream\" error, we IGNORE it and PROCEED to OTP\n          // If it's a real error (like \"User exists\"), we show it\n          if (ignoreStreamError(err)) {\n            console.warn(\"Supabase stream error suppressed. Proceeding to OTP.\");\n          } else {\n            // Handle \"User already registered\" specifically\n            const msg = err.message || \"\";\n            if (msg.includes(\"already registered\") || err.status === 422) {\n              setEmailError(\"This email is already registered.\");\n              setLoading(false);\n              return; // Stop here\n            }\n            // Handle \"Rate Limit\" specifically\n            if (msg.includes(\"rate limit\") || err.status === 429) {\n              toast({\n                title: \"Too many attempts\",\n                description: \"Please wait a while before changing email again.\",\n                variant: \"destructive\"\n              });\n              setLoading(false);\n              return;\n            }\n\n            // Throw any other unknown error\n            throw err;\n          }\n        }\n\n        // --- SUCCESS SEQUENCE ---\n        // If we reached here, either it worked or we suppressed the stream error.\n        // In both cases, we assume the email was sent and show the OTP screen.\n\n        setNewEmailToVerify(email);\n        setIsEmailChangePending(true); // <--- This switches the UI\n        toast({\n          title: \"Verification code sent\",\n          description: `Please enter the code sent to ${email}`\n        });\n        setLoading(false);\n        return; // CRITICAL: Return here so we don't close the modal\n      }\n\n      // --- DONE (If no email change) ---\n      toast({\n        title: \"Profile updated successfully!\"\n      });\n      if (onProfileUpdate) await onProfileUpdate();\n      setIsEditing(false);\n      onClose();\n    } catch (error) {\n      console.error(\"Profile Save Error:\", error);\n      toast({\n        title: \"Error updating profile\",\n        description: error.message || \"Something went wrong\",\n        variant: \"destructive\"\n      });\n    } finally {\n      // Only turn off loading if we are NOT switching to OTP mode\n      // If we are switching, we keep loading false so the OTP input is usable\n      if (!isEmailChangePending) setLoading(false);\n    }\n  };\n  const handleVerifyEmailOtp = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      // Verify Code\n      try {\n        const {\n          error\n        } = await supabase.auth.verifyOtp({\n          email: newEmailToVerify,\n          token: otp,\n          type: 'email_change'\n        });\n        if (error) throw error;\n      } catch (err) {\n        if (!ignoreStreamError(err)) throw err;\n      }\n      toast({\n        title: \"Email updated successfully!\"\n      });\n      if (onProfileUpdate) await onProfileUpdate();\n\n      // Reset everything\n      setIsEmailChangePending(false);\n      setIsEditing(false);\n      onClose();\n    } catch (error) {\n      toast({\n        title: \"Verification failed\",\n        description: \"Invalid code or expired. Please try again.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(AnimatePresence, {\n    \"x-file-name\": \"ProfileModal\",\n    \"x-line-number\": \"218\",\n    \"x-component\": \"AnimatePresence\",\n    \"x-id\": \"ProfileModal_218\",\n    \"x-dynamic\": \"false\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\",\n      \"x-file-name\": \"ProfileModal\",\n      \"x-line-number\": \"219\",\n      \"x-component\": \"div\",\n      \"x-id\": \"ProfileModal_219\",\n      \"x-dynamic\": \"false\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          scale: 0.95\n        },\n        animate: {\n          opacity: 1,\n          scale: 1\n        },\n        exit: {\n          opacity: 0,\n          scale: 0.95\n        },\n        className: \"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden border border-slate-200 dark:border-slate-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative h-32 bg-gradient-to-r from-violet-600 to-indigo-600\",\n          \"x-file-name\": \"ProfileModal\",\n          \"x-line-number\": \"227\",\n          \"x-component\": \"div\",\n          \"x-id\": \"ProfileModal_227\",\n          \"x-dynamic\": \"false\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition-colors\",\n            \"x-file-name\": \"ProfileModal\",\n            \"x-line-number\": \"228\",\n            \"x-component\": \"button\",\n            \"x-id\": \"ProfileModal_228\",\n            \"x-dynamic\": \"false\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute -bottom-12 left-1/2 -translate-x-1/2\",\n            \"x-file-name\": \"ProfileModal\",\n            \"x-line-number\": \"234\",\n            \"x-component\": \"div\",\n            \"x-id\": \"ProfileModal_234\",\n            \"x-dynamic\": \"false\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative group\",\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"235\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ProfileModal_235\",\n              \"x-dynamic\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-24 h-24 rounded-full border-4 border-white dark:border-gray-900 overflow-hidden bg-slate-100\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"236\",\n                \"x-component\": \"div\",\n                \"x-id\": \"ProfileModal_236\",\n                \"x-dynamic\": \"true\",\n                children: avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: avatarUrl,\n                  alt: \"Profile\",\n                  className: \"w-full h-full object-cover\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"238\",\n                  \"x-component\": \"img\",\n                  \"x-id\": \"ProfileModal_238\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 22\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full h-full flex items-center justify-center bg-violet-100 text-violet-600\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"240\",\n                  \"x-component\": \"div\",\n                  \"x-id\": \"ProfileModal_240\",\n                  \"x-dynamic\": \"false\",\n                  children: /*#__PURE__*/_jsxDEV(User, {\n                    className: \"w-10 h-10\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this), isEditing && !isEmailChangePending && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                className: \"absolute bottom-0 right-0 p-2 bg-violet-600 text-white rounded-full shadow-lg hover:bg-violet-700\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"246\",\n                \"x-component\": \"button\",\n                \"x-id\": \"ProfileModal_246\",\n                \"x-dynamic\": \"false\",\n                children: /*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-4 h-4\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"250\",\n                  \"x-component\": \"Camera\",\n                  \"x-id\": \"ProfileModal_250\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                className: \"hidden\",\n                accept: \"image/*\",\n                onChange: handleFileSelect,\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"253\",\n                \"x-component\": \"input\",\n                \"x-id\": \"ProfileModal_253\",\n                \"x-dynamic\": \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-16 pb-8 px-8\",\n          \"x-file-name\": \"ProfileModal\",\n          \"x-line-number\": \"265\",\n          \"x-component\": \"div\",\n          \"x-id\": \"ProfileModal_265\",\n          \"x-dynamic\": \"true\",\n          children: isEmailChangePending ?\n          /*#__PURE__*/\n          /* OTP Form */\n          _jsxDEV(\"div\", {\n            className: \"space-y-6 text-center\",\n            \"x-file-name\": \"ProfileModal\",\n            \"x-line-number\": \"268\",\n            \"x-component\": \"div\",\n            \"x-id\": \"ProfileModal_268\",\n            \"x-dynamic\": \"false\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center mb-4\",\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"269\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ProfileModal_269\",\n              \"x-dynamic\": \"false\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-green-100 p-3 rounded-full\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"270\",\n                \"x-component\": \"div\",\n                \"x-id\": \"ProfileModal_270\",\n                \"x-dynamic\": \"false\",\n                children: /*#__PURE__*/_jsxDEV(Mail, {\n                  className: \"w-6 h-6 text-green-600\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"271\",\n                  \"x-component\": \"Mail\",\n                  \"x-id\": \"ProfileModal_271\",\n                  \"x-dynamic\": \"false\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"274\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ProfileModal_274\",\n              \"x-dynamic\": \"false\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-slate-900 dark:text-white\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"275\",\n                \"x-component\": \"h3\",\n                \"x-id\": \"ProfileModal_275\",\n                \"x-dynamic\": \"false\",\n                children: \"Verify New Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-muted-foreground mt-1\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"276\",\n                \"x-component\": \"p\",\n                \"x-id\": \"ProfileModal_276\",\n                \"x-dynamic\": \"false\",\n                children: [\"Enter the 6-digit code sent to \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-slate-900 dark:text-white\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"277\",\n                  \"x-component\": \"span\",\n                  \"x-id\": \"ProfileModal_277\",\n                  \"x-dynamic\": \"true\",\n                  children: newEmailToVerify\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 54\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Enter code\",\n              className: \"text-center text-xl tracking-widest h-12\",\n              maxLength: 6,\n              value: otp,\n              onChange: e => setOtp(e.target.value),\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"281\",\n              \"x-component\": \"Input\",\n              \"x-id\": \"ProfileModal_281\",\n              \"x-dynamic\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleVerifyEmailOtp,\n              className: \"w-full bg-violet-600 hover:bg-violet-700 text-white h-11\",\n              disabled: loading || otp.length < 6,\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"289\",\n              \"x-component\": \"Button\",\n              \"x-id\": \"ProfileModal_289\",\n              \"x-dynamic\": \"true\",\n              children: [loading && /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"w-4 h-4 mr-2 animate-spin\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"294\",\n                \"x-component\": \"Loader2\",\n                \"x-id\": \"ProfileModal_294\",\n                \"x-dynamic\": \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 33\n              }, this), \"Confirm Change\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 16\n          }, this) :\n          /*#__PURE__*/\n          /* Profile Edit Form */\n          _jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            \"x-file-name\": \"ProfileModal\",\n            \"x-line-number\": \"300\",\n            \"x-component\": \"div\",\n            \"x-id\": \"ProfileModal_300\",\n            \"x-dynamic\": \"true\",\n            children: !isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center space-y-4\",\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"302\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ProfileModal_302\",\n              \"x-dynamic\": \"false\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"303\",\n                \"x-component\": \"div\",\n                \"x-id\": \"ProfileModal_303\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-2xl font-bold text-slate-900 dark:text-white\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"304\",\n                  \"x-component\": \"h2\",\n                  \"x-id\": \"ProfileModal_304\",\n                  \"x-dynamic\": \"true\",\n                  children: fullName || 'User'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-slate-500 dark:text-slate-400\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"305\",\n                  \"x-component\": \"p\",\n                  \"x-id\": \"ProfileModal_305\",\n                  \"x-dynamic\": \"true\",\n                  children: email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline\",\n                onClick: () => setIsEditing(true),\n                className: \"w-full\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"307\",\n                \"x-component\": \"Button\",\n                \"x-id\": \"ProfileModal_307\",\n                \"x-dynamic\": \"false\",\n                children: \"Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              \"x-file-name\": \"ProfileModal\",\n              \"x-line-number\": \"312\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ProfileModal_312\",\n              \"x-dynamic\": \"false\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"313\",\n                \"x-component\": \"div\",\n                \"x-id\": \"ProfileModal_313\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"314\",\n                  \"x-component\": \"Label\",\n                  \"x-id\": \"ProfileModal_314\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Full Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  value: fullName,\n                  onChange: e => setFullName(e.target.value),\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"315\",\n                  \"x-component\": \"Input\",\n                  \"x-id\": \"ProfileModal_315\",\n                  \"x-dynamic\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"317\",\n                \"x-component\": \"div\",\n                \"x-id\": \"ProfileModal_317\",\n                \"x-dynamic\": \"true\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"318\",\n                  \"x-component\": \"Label\",\n                  \"x-id\": \"ProfileModal_318\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Email Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  value: email,\n                  onChange: e => {\n                    setEmail(e.target.value);\n                    setEmailError('');\n                  },\n                  className: emailError ? \"border-red-500 focus-visible:ring-red-500\" : \"\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"319\",\n                  \"x-component\": \"Input\",\n                  \"x-id\": \"ProfileModal_319\",\n                  \"x-dynamic\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 23\n                }, this), emailError && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-red-600 flex items-center gap-1 mt-1\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"329\",\n                  \"x-component\": \"p\",\n                  \"x-id\": \"ProfileModal_329\",\n                  \"x-dynamic\": \"true\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    className: \"w-3 h-3\",\n                    \"x-file-name\": \"ProfileModal\",\n                    \"x-line-number\": \"330\",\n                    \"x-component\": \"AlertCircle\",\n                    \"x-id\": \"ProfileModal_330\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 31\n                  }, this), \" \", emailError]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 27\n                }, this), !emailError && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-muted-foreground flex items-center gap-1\",\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"335\",\n                  \"x-component\": \"p\",\n                  \"x-id\": \"ProfileModal_335\",\n                  \"x-dynamic\": \"false\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    className: \"w-3 h-3\",\n                    \"x-file-name\": \"ProfileModal\",\n                    \"x-line-number\": \"336\",\n                    \"x-component\": \"AlertCircle\",\n                    \"x-id\": \"ProfileModal_336\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 29\n                  }, this), \"Changing email requires verification.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-3 pt-2\",\n                \"x-file-name\": \"ProfileModal\",\n                \"x-line-number\": \"341\",\n                \"x-component\": \"div\",\n                \"x-id\": \"ProfileModal_341\",\n                \"x-dynamic\": \"false\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"ghost\",\n                  className: \"flex-1\",\n                  onClick: () => setIsEditing(false),\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"342\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"ProfileModal_342\",\n                  \"x-dynamic\": \"false\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 24\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"flex-1 bg-violet-600 hover:bg-violet-700 text-white\",\n                  onClick: handleSaveChanges,\n                  disabled: loading,\n                  \"x-file-name\": \"ProfileModal\",\n                  \"x-line-number\": \"343\",\n                  \"x-component\": \"Button\",\n                  \"x-id\": \"ProfileModal_343\",\n                  \"x-dynamic\": \"true\",\n                  children: loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                    className: \"w-4 h-4 animate-spin\",\n                    \"x-file-name\": \"ProfileModal\",\n                    \"x-line-number\": \"344\",\n                    \"x-component\": \"Loader2\",\n                    \"x-id\": \"ProfileModal_344\",\n                    \"x-dynamic\": \"false\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 38\n                  }, this) : 'Save Changes'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 24\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfileModal, \"ymeigdHJ9CHLXUQwNKlOIzI8raU=\", false, function () {\n  return [useToast];\n});\n_c = ProfileModal;\nexport default ProfileModal;\nvar _c;\n$RefreshReg$(_c, \"ProfileModal\");","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","AnimatePresence","X","Camera","Mail","User","Loader2","AlertCircle","supabase","Button","Input","Label","useToast","jsxDEV","_jsxDEV","ignoreStreamError","err","msg","String","message","toLowerCase","includes","ProfileModal","isOpen","onClose","user","profile","onProfileUpdate","_s","isEditing","setIsEditing","loading","setLoading","fullName","setFullName","email","setEmail","avatarUrl","setAvatarUrl","avatarFile","setAvatarFile","emailError","setEmailError","isEmailChangePending","setIsEmailChangePending","otp","setOtp","newEmailToVerify","setNewEmailToVerify","fileInputRef","toast","full_name","avatar_url","handleFileSelect","e","file","target","files","URL","createObjectURL","handleSaveChanges","uploadedAvatarUrl","fileExt","name","split","pop","fileName","id","Math","random","filePath","error","uploadError","storage","from","upload","data","publicUrl","getPublicUrl","updates","updated_at","Date","upsert","select","auth","updateUser","console","warn","status","title","description","variant","handleVerifyEmailOtp","preventDefault","verifyOtp","token","type","children","className","div","initial","opacity","scale","animate","exit","onClick","_jsxFileName","lineNumber","columnNumber","src","alt","_fileInputRef$current","current","click","ref","accept","onChange","placeholder","maxLength","value","disabled","length","_c","$RefreshReg$"],"sources":["/workspaces/TrustFlow-App/frontend/src/components/ProfileModal.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Camera, Mail, User, Loader2, AlertCircle } from 'lucide-react';\nimport { supabase } from '@/lib/supabase';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\n\n// Helper to ignore the specific Codespace/Proxy crash\nconst ignoreStreamError = (err) => {\n  const msg = String(err?.message || err).toLowerCase();\n  return (\n    msg.includes(\"body stream\") || \n    msg.includes(\"failed to execute\") || \n    msg.includes(\"json\") ||\n    msg.includes(\"text\")\n  );\n};\n\nconst ProfileModal = ({ isOpen, onClose, user, profile, onProfileUpdate }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [loading, setLoading] = useState(false);\n  \n  // Form Data\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState('');\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [emailError, setEmailError] = useState('');\n\n  // Email Change State\n  const [isEmailChangePending, setIsEmailChangePending] = useState(false);\n  const [otp, setOtp] = useState('');\n  const [newEmailToVerify, setNewEmailToVerify] = useState('');\n\n  const fileInputRef = useRef(null);\n  const { toast } = useToast();\n\n // Fix: Remove 'user' and 'profile' from dependencies.\n  // This ensures the form only resets when you OPEN the modal, \n  // not when Supabase updates in the background.\n  useEffect(() => {\n    if (isOpen) {\n        setFullName(profile?.full_name || '');\n        setEmail(user?.email || '');\n        setAvatarUrl(profile?.avatar_url || '');\n        setAvatarFile(null);\n        setIsEditing(false);\n        setIsEmailChangePending(false);\n        setOtp('');\n        setEmailError('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n\n  const handleFileSelect = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setAvatarFile(file);\n      setAvatarUrl(URL.createObjectURL(file));\n    }\n  };\n\n  const handleSaveChanges = async () => {\n    setLoading(true);\n    setEmailError('');\n\n    try {\n      // --- PART 1: UPLOAD PHOTO ---\n      let uploadedAvatarUrl = avatarUrl;\n\n      if (avatarFile) {\n        const fileExt = avatarFile.name.split('.').pop();\n        const fileName = `${user.id}-${Math.random()}.${fileExt}`;\n        const filePath = `${fileName}`;\n\n        try {\n            const { error: uploadError } = await supabase.storage\n                .from('avatars')\n                .upload(filePath, avatarFile);\n            if (uploadError) throw uploadError;\n        } catch (err) {\n            if (!ignoreStreamError(err)) throw err;\n        }\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('avatars')\n          .getPublicUrl(filePath);\n        \n        uploadedAvatarUrl = publicUrl;\n      }\n\n      // --- PART 2: SAVE PROFILE (Name/Photo) ---\n      const updates = {\n        id: user.id,\n        full_name: fullName,\n        avatar_url: uploadedAvatarUrl,\n        updated_at: new Date(),\n      };\n\n      try {\n         const { error } = await supabase.from('profiles').upsert(updates).select();\n         if (error) throw error;\n      } catch (err) {\n         if (!ignoreStreamError(err)) throw err;\n      }\n\n      // --- PART 3: HANDLE EMAIL CHANGE ---\n      if (email !== user.email) {\n        \n        // IMPORTANT: We use a dedicated try/catch here to FORCE the UI to switch\n        try {\n            const { error } = await supabase.auth.updateUser({ email: email });\n            if (error) throw error;\n        } catch (err) {\n            // If it's the \"Stream\" error, we IGNORE it and PROCEED to OTP\n            // If it's a real error (like \"User exists\"), we show it\n            if (ignoreStreamError(err)) {\n                console.warn(\"Supabase stream error suppressed. Proceeding to OTP.\");\n            } else {\n                // Handle \"User already registered\" specifically\n                const msg = err.message || \"\";\n                if (msg.includes(\"already registered\") || err.status === 422) {\n                    setEmailError(\"This email is already registered.\");\n                    setLoading(false);\n                    return; // Stop here\n                }\n                // Handle \"Rate Limit\" specifically\n                if (msg.includes(\"rate limit\") || err.status === 429) {\n                    toast({\n                        title: \"Too many attempts\",\n                        description: \"Please wait a while before changing email again.\",\n                        variant: \"destructive\"\n                    });\n                    setLoading(false);\n                    return;\n                }\n                \n                // Throw any other unknown error\n                throw err;\n            }\n        }\n\n        // --- SUCCESS SEQUENCE ---\n        // If we reached here, either it worked or we suppressed the stream error.\n        // In both cases, we assume the email was sent and show the OTP screen.\n        \n        setNewEmailToVerify(email);\n        setIsEmailChangePending(true); // <--- This switches the UI\n        toast({\n          title: \"Verification code sent\",\n          description: `Please enter the code sent to ${email}`,\n        });\n        \n        setLoading(false);\n        return; // CRITICAL: Return here so we don't close the modal\n      }\n\n      // --- DONE (If no email change) ---\n      toast({ title: \"Profile updated successfully!\" });\n      if (onProfileUpdate) await onProfileUpdate();\n      setIsEditing(false);\n      onClose();\n\n    } catch (error) {\n      console.error(\"Profile Save Error:\", error);\n      toast({\n        title: \"Error updating profile\",\n        description: error.message || \"Something went wrong\",\n        variant: \"destructive\"\n      });\n    } finally {\n      // Only turn off loading if we are NOT switching to OTP mode\n      // If we are switching, we keep loading false so the OTP input is usable\n      if (!isEmailChangePending) setLoading(false);\n    }\n  };\n\n  const handleVerifyEmailOtp = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      // Verify Code\n      try {\n        const { error } = await supabase.auth.verifyOtp({\n            email: newEmailToVerify,\n            token: otp,\n            type: 'email_change'\n        });\n        if (error) throw error;\n      } catch (err) {\n         if (!ignoreStreamError(err)) throw err;\n      }\n\n      toast({ title: \"Email updated successfully!\" });\n      if (onProfileUpdate) await onProfileUpdate();\n      \n      // Reset everything\n      setIsEmailChangePending(false);\n      setIsEditing(false);\n      onClose();\n      \n    } catch (error) {\n      toast({\n        title: \"Verification failed\",\n        description: \"Invalid code or expired. Please try again.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden border border-slate-200 dark:border-slate-800\"\n        >\n          {/* Header */}\n          <div className=\"relative h-32 bg-gradient-to-r from-violet-600 to-indigo-600\">\n            <button \n              onClick={onClose}\n              className=\"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n            <div className=\"absolute -bottom-12 left-1/2 -translate-x-1/2\">\n              <div className=\"relative group\">\n                <div className=\"w-24 h-24 rounded-full border-4 border-white dark:border-gray-900 overflow-hidden bg-slate-100\">\n                   {avatarUrl ? (\n                     <img src={avatarUrl} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                   ) : (\n                     <div className=\"w-full h-full flex items-center justify-center bg-violet-100 text-violet-600\">\n                        <User className=\"w-10 h-10\" />\n                     </div>\n                   )}\n                </div>\n                {isEditing && !isEmailChangePending && (\n                  <button \n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"absolute bottom-0 right-0 p-2 bg-violet-600 text-white rounded-full shadow-lg hover:bg-violet-700\"\n                  >\n                    <Camera className=\"w-4 h-4\" />\n                  </button>\n                )}\n                <input \n                  type=\"file\" \n                  ref={fileInputRef} \n                  className=\"hidden\" \n                  accept=\"image/*\"\n                  onChange={handleFileSelect}\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"pt-16 pb-8 px-8\">\n            {isEmailChangePending ? (\n               /* OTP Form */\n               <div className=\"space-y-6 text-center\">\n                  <div className=\"flex justify-center mb-4\">\n                    <div className=\"bg-green-100 p-3 rounded-full\">\n                        <Mail className=\"w-6 h-6 text-green-600\" />\n                    </div>\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white\">Verify New Email</h3>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      Enter the 6-digit code sent to <span className=\"font-medium text-slate-900 dark:text-white\">{newEmailToVerify}</span>\n                    </p>\n                  </div>\n                  \n                  <Input \n                    placeholder=\"Enter code\"\n                    className=\"text-center text-xl tracking-widest h-12\"\n                    maxLength={6}\n                    value={otp} \n                    onChange={(e) => setOtp(e.target.value)}\n                  />\n\n                  <Button \n                    onClick={handleVerifyEmailOtp} \n                    className=\"w-full bg-violet-600 hover:bg-violet-700 text-white h-11\"\n                    disabled={loading || otp.length < 6}\n                  >\n                    {loading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Confirm Change\n                  </Button>\n               </div>\n            ) : (\n               /* Profile Edit Form */\n               <div className=\"space-y-6\">\n                {!isEditing ? (\n                  <div className=\"text-center space-y-4\">\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-slate-900 dark:text-white\">{fullName || 'User'}</h2>\n                      <p className=\"text-slate-500 dark:text-slate-400\">{email}</p>\n                    </div>\n                    <Button variant=\"outline\" onClick={() => setIsEditing(true)} className=\"w-full\">\n                      Edit Profile\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label>Full Name</Label>\n                      <Input value={fullName} onChange={(e) => setFullName(e.target.value)} />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Email Address</Label>\n                      <Input \n                        value={email} \n                        onChange={(e) => {\n                            setEmail(e.target.value);\n                            setEmailError('');\n                        }}\n                        className={emailError ? \"border-red-500 focus-visible:ring-red-500\" : \"\"}\n                      />\n                      \n                      {emailError && (\n                          <p className=\"text-sm text-red-600 flex items-center gap-1 mt-1\">\n                              <AlertCircle className=\"w-3 h-3\" /> {emailError}\n                          </p>\n                      )}\n                      \n                      {!emailError && (\n                        <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                            <AlertCircle className=\"w-3 h-3\" /> \n                            Changing email requires verification.\n                        </p>\n                      )}\n                    </div>\n                    <div className=\"flex gap-3 pt-2\">\n                       <Button variant=\"ghost\" className=\"flex-1\" onClick={() => setIsEditing(false)}>Cancel</Button>\n                       <Button className=\"flex-1 bg-violet-600 hover:bg-violet-700 text-white\" onClick={handleSaveChanges} disabled={loading}>\n                          {loading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Save Changes'}\n                       </Button>\n                    </div>\n                  </div>\n                )}\n               </div>\n            )}\n          </div>\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n};\n\nexport default ProfileModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}