{"ast":null,"code":"var _jsxFileName = \"/workspaces/TrustFlow-App/frontend/src/pages/ForgotPassword.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { supabase } from '@/lib/supabase'; // Direct import for manual OTP handling\nimport { ArrowLeft, KeyRound, Loader2, Mail, CheckCircle2, AlertCircle } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { InputOTP, InputOTPGroup, InputOTPSlot } from \"@/components/ui/input-otp\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ForgotPassword = () => {\n  _s();\n  // --- STATE ---\n  const [step, setStep] = useState(1); // 1: Email, 2: OTP, 3: New Password, 4: Success\n  const [loading, setLoading] = useState(false);\n\n  // Data State\n  const [email, setEmail] = useState('');\n  const [otp, setOtp] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  // Error State\n  const [error, setError] = useState(''); // General error text\n  const [fieldErrors, setFieldErrors] = useState({\n    email: '',\n    otp: '',\n    password: '',\n    confirmPassword: ''\n  });\n  const navigate = useNavigate();\n  const {\n    toast\n  } = useToast();\n\n  // --- HELPERS ---\n  const clearFieldError = field => {\n    setFieldErrors(prev => ({\n      ...prev,\n      [field]: ''\n    }));\n    setError('');\n  };\n\n  // --- STEP 1: SEND OTP ---\n  const handleSendOtp = async e => {\n    e.preventDefault();\n    setError('');\n\n    // Validate Email\n    if (!email.trim()) {\n      setFieldErrors(prev => ({\n        ...prev,\n        email: \"Email is required.\"\n      }));\n      return;\n    }\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      setFieldErrors(prev => ({\n        ...prev,\n        email: \"Please enter a valid email.\"\n      }));\n      return;\n    }\n    setLoading(true);\n    try {\n      // 1. Pre-check: Does email exist?\n      const {\n        data: emailExists,\n        error: rpcError\n      } = await supabase.rpc('check_email_exists', {\n        email_to_check: email\n      });\n      if (rpcError) throw rpcError;\n      if (!emailExists) {\n        // Stop here if email not found (Security decision: Explicit error vs Silent fail)\n        // User requested: \"stays on that interface\"\n        setFieldErrors(prev => ({\n          ...prev,\n          email: \"This email is not registered.\"\n        }));\n        setLoading(false);\n        return;\n      }\n\n      // 2. Send Password Reset OTP\n      const {\n        error\n      } = await supabase.auth.resetPasswordForEmail(email);\n      if (error) throw error;\n      setStep(2); // Move to OTP\n      toast({\n        title: 'OTP Sent',\n        description: `We sent a code to ${email}`\n      });\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- STEP 2: VERIFY OTP ---\n  const handleVerifyOtp = async e => {\n    e.preventDefault();\n    setError('');\n    if (otp.length < 6) {\n      setFieldErrors(prev => ({\n        ...prev,\n        otp: \"Please enter the 6-digit code.\"\n      }));\n      return;\n    }\n    setLoading(true);\n    try {\n      // Verify OTP (Type: recovery)\n      const {\n        data,\n        error\n      } = await supabase.auth.verifyOtp({\n        email,\n        token: otp,\n        type: 'recovery'\n      });\n      if (error) throw error;\n\n      // OTP Correct -> Move to New Password\n      setStep(3);\n    } catch (error) {\n      // Handle Invalid OTP specific error\n      setFieldErrors(prev => ({\n        ...prev,\n        otp: \"Invalid or expired OTP.\"\n      }));\n      setError(\"Invalid code. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- STEP 3: UPDATE PASSWORD ---\n  // --- STEP 3: UPDATE PASSWORD ---\n  const handleUpdatePassword = async e => {\n    e.preventDefault();\n    setError('');\n\n    // Validation\n    let isValid = true;\n    const newErrors = {\n      password: '',\n      confirmPassword: ''\n    };\n    if (password.length < 6) {\n      newErrors.password = \"Password must be at least 6 characters.\";\n      isValid = false;\n    }\n    if (password !== confirmPassword) {\n      newErrors.confirmPassword = \"Passwords do not match.\";\n      isValid = false;\n    }\n    if (!isValid) {\n      setFieldErrors(prev => ({\n        ...prev,\n        ...newErrors\n      }));\n      return;\n    }\n    setLoading(true);\n    try {\n      // 1. Update the password (requires the current temporary session)\n      const {\n        error\n      } = await supabase.auth.updateUser({\n        password: password\n      });\n      if (error) throw error;\n\n      // --- THE FIX: KILL THE SESSION IMMEDIATELY ---\n      // This ensures they are NOT logged in when they hit the Login page.\n      await supabase.auth.signOut();\n      localStorage.clear(); // Wipe any lingering tokens\n\n      // 2. Show Success UI\n      setStep(4);\n\n      // 3. Redirect to Login (User is now anonymous again)\n      setTimeout(() => {\n        navigate('/login');\n      }, 5000);\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-50 via-background to-indigo-50 dark:from-violet-950/20 dark:via-background dark:to-indigo-950/20 p-4\",\n    \"x-file-name\": \"ForgotPassword\",\n    \"x-line-number\": \"180\",\n    \"x-component\": \"div\",\n    \"x-id\": \"ForgotPassword_180\",\n    \"x-dynamic\": \"false\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        y: 20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"w-full max-w-md\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"backdrop-blur-sm bg-white/80 dark:bg-gray-900/80 shadow-xl border-violet-100 dark:border-violet-900/50\",\n        \"x-file-name\": \"ForgotPassword\",\n        \"x-line-number\": \"186\",\n        \"x-component\": \"Card\",\n        \"x-id\": \"ForgotPassword_186\",\n        \"x-dynamic\": \"true\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"text-center\",\n          \"x-file-name\": \"ForgotPassword\",\n          \"x-line-number\": \"187\",\n          \"x-component\": \"CardHeader\",\n          \"x-id\": \"ForgotPassword_187\",\n          \"x-dynamic\": \"true\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-violet-100 dark:bg-violet-900/30 rounded-full flex items-center justify-center mx-auto mb-4\",\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"188\",\n            \"x-component\": \"div\",\n            \"x-id\": \"ForgotPassword_188\",\n            \"x-dynamic\": \"true\",\n            children: step === 4 ? /*#__PURE__*/_jsxDEV(CheckCircle2, {\n              className: \"w-6 h-6 text-green-600\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"189\",\n              \"x-component\": \"CheckCircle2\",\n              \"x-id\": \"ForgotPassword_189\",\n              \"x-dynamic\": \"false\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(KeyRound, {\n              className: \"w-6 h-6 text-violet-600\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"189\",\n              \"x-component\": \"KeyRound\",\n              \"x-id\": \"ForgotPassword_189\",\n              \"x-dynamic\": \"false\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 83\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardTitle, {\n            className: \"text-2xl\",\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"191\",\n            \"x-component\": \"CardTitle\",\n            \"x-id\": \"ForgotPassword_191\",\n            \"x-dynamic\": \"true\",\n            children: [step === 1 && \"Forgot password?\", step === 2 && \"Enter OTP\", step === 3 && \"Reset Password\", step === 4 && \"Password Updated\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"197\",\n            \"x-component\": \"CardDescription\",\n            \"x-id\": \"ForgotPassword_197\",\n            \"x-dynamic\": \"true\",\n            children: [step === 1 && \"No worries, we'll send you reset instructions.\", step === 2 && `Enter the code sent to ${email}`, step === 3 && \"Create a new strong password.\", step === 4 && \"Redirecting to login in 5 seconds...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          \"x-file-name\": \"ForgotPassword\",\n          \"x-line-number\": \"204\",\n          \"x-component\": \"CardContent\",\n          \"x-id\": \"ForgotPassword_204\",\n          \"x-dynamic\": \"true\",\n          \"x-excluded\": \"true\",\n          children: [step === 1 && /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendOtp,\n            className: \"space-y-4\",\n            noValidate: true,\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"208\",\n            \"x-component\": \"form\",\n            \"x-id\": \"ForgotPassword_208\",\n            \"x-dynamic\": \"false\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"209\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ForgotPassword_209\",\n              \"x-dynamic\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"email\",\n                className: fieldErrors.email ? \"text-red-500\" : \"\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"210\",\n                \"x-component\": \"Label\",\n                \"x-id\": \"ForgotPassword_210\",\n                \"x-dynamic\": \"false\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                id: \"email\",\n                type: \"email\",\n                placeholder: \"Enter your email\",\n                value: email,\n                onChange: e => {\n                  setEmail(e.target.value);\n                  setError('');\n                },\n                onFocus: () => clearFieldError('email'),\n                className: fieldErrors.email ? \"border-red-500 focus-visible:ring-red-500\" : \"\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"211\",\n                \"x-component\": \"Input\",\n                \"x-id\": \"ForgotPassword_211\",\n                \"x-dynamic\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), fieldErrors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-red-500\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"220\",\n                \"x-component\": \"p\",\n                \"x-id\": \"ForgotPassword_220\",\n                \"x-dynamic\": \"true\",\n                children: fieldErrors.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              className: \"w-full bg-violet-600 hover:bg-violet-700\",\n              disabled: loading,\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"223\",\n              \"x-component\": \"Button\",\n              \"x-id\": \"ForgotPassword_223\",\n              \"x-dynamic\": \"true\",\n              children: [loading && /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"w-4 h-4 mr-2 animate-spin\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"224\",\n                \"x-component\": \"Loader2\",\n                \"x-id\": \"ForgotPassword_224\",\n                \"x-dynamic\": \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 31\n              }, this), \"Send Reset Code\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this), step === 2 && /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleVerifyOtp,\n            className: \"space-y-6\",\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"232\",\n            \"x-component\": \"form\",\n            \"x-id\": \"ForgotPassword_232\",\n            \"x-dynamic\": \"true\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"233\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ForgotPassword_233\",\n              \"x-dynamic\": \"false\",\n              children: /*#__PURE__*/_jsxDEV(InputOTP, {\n                maxLength: 6,\n                value: otp,\n                onChange: val => {\n                  setOtp(val);\n                  setError('');\n                  clearFieldError('otp');\n                },\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"234\",\n                \"x-component\": \"InputOTP\",\n                \"x-id\": \"ForgotPassword_234\",\n                \"x-dynamic\": \"true\",\n                children: /*#__PURE__*/_jsxDEV(InputOTPGroup, {\n                  className: fieldErrors.otp ? \"border-red-500\" : \"\",\n                  \"x-file-name\": \"ForgotPassword\",\n                  \"x-line-number\": \"239\",\n                  \"x-component\": \"InputOTPGroup\",\n                  \"x-id\": \"ForgotPassword_239\",\n                  \"x-dynamic\": \"true\",\n                  children: [/*#__PURE__*/_jsxDEV(InputOTPSlot, {\n                    index: 0,\n                    className: fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\",\n                    \"x-file-name\": \"ForgotPassword\",\n                    \"x-line-number\": \"240\",\n                    \"x-component\": \"InputOTPSlot\",\n                    \"x-id\": \"ForgotPassword_240\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(InputOTPSlot, {\n                    index: 1,\n                    className: fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\",\n                    \"x-file-name\": \"ForgotPassword\",\n                    \"x-line-number\": \"241\",\n                    \"x-component\": \"InputOTPSlot\",\n                    \"x-id\": \"ForgotPassword_241\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(InputOTPSlot, {\n                    index: 2,\n                    className: fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\",\n                    \"x-file-name\": \"ForgotPassword\",\n                    \"x-line-number\": \"242\",\n                    \"x-component\": \"InputOTPSlot\",\n                    \"x-id\": \"ForgotPassword_242\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(InputOTPSlot, {\n                    index: 3,\n                    className: fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\",\n                    \"x-file-name\": \"ForgotPassword\",\n                    \"x-line-number\": \"243\",\n                    \"x-component\": \"InputOTPSlot\",\n                    \"x-id\": \"ForgotPassword_243\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(InputOTPSlot, {\n                    index: 4,\n                    className: fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\",\n                    \"x-file-name\": \"ForgotPassword\",\n                    \"x-line-number\": \"244\",\n                    \"x-component\": \"InputOTPSlot\",\n                    \"x-id\": \"ForgotPassword_244\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(InputOTPSlot, {\n                    index: 5,\n                    className: fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\",\n                    \"x-file-name\": \"ForgotPassword\",\n                    \"x-line-number\": \"245\",\n                    \"x-component\": \"InputOTPSlot\",\n                    \"x-id\": \"ForgotPassword_245\",\n                    \"x-dynamic\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), fieldErrors.otp && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-red-500 text-center font-medium\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"249\",\n              \"x-component\": \"p\",\n              \"x-id\": \"ForgotPassword_249\",\n              \"x-dynamic\": \"true\",\n              children: fieldErrors.otp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              className: \"w-full bg-violet-600 hover:bg-violet-700\",\n              disabled: loading || otp.length < 6,\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"251\",\n              \"x-component\": \"Button\",\n              \"x-id\": \"ForgotPassword_251\",\n              \"x-dynamic\": \"true\",\n              children: [loading && /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"w-4 h-4 mr-2 animate-spin\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"252\",\n                \"x-component\": \"Loader2\",\n                \"x-id\": \"ForgotPassword_252\",\n                \"x-dynamic\": \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 31\n              }, this), \"Verify Code\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), step === 3 && /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleUpdatePassword,\n            className: \"space-y-4\",\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"260\",\n            \"x-component\": \"form\",\n            \"x-id\": \"ForgotPassword_260\",\n            \"x-dynamic\": \"false\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"261\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ForgotPassword_261\",\n              \"x-dynamic\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"password\",\n                className: fieldErrors.password ? \"text-red-500\" : \"\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"262\",\n                \"x-component\": \"Label\",\n                \"x-id\": \"ForgotPassword_262\",\n                \"x-dynamic\": \"false\",\n                children: \"New Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                id: \"password\",\n                type: \"password\",\n                placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n                value: password,\n                onChange: e => {\n                  setPassword(e.target.value);\n                  setError('');\n                },\n                onFocus: () => clearFieldError('password'),\n                className: fieldErrors.password ? \"border-red-500 focus-visible:ring-red-500\" : \"\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"263\",\n                \"x-component\": \"Input\",\n                \"x-id\": \"ForgotPassword_263\",\n                \"x-dynamic\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this), fieldErrors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-red-500\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"272\",\n                \"x-component\": \"p\",\n                \"x-id\": \"ForgotPassword_272\",\n                \"x-dynamic\": \"true\",\n                children: fieldErrors.password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"275\",\n              \"x-component\": \"div\",\n              \"x-id\": \"ForgotPassword_275\",\n              \"x-dynamic\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"confirmPassword\",\n                className: fieldErrors.confirmPassword ? \"text-red-500\" : \"\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"276\",\n                \"x-component\": \"Label\",\n                \"x-id\": \"ForgotPassword_276\",\n                \"x-dynamic\": \"false\",\n                children: \"Confirm Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                id: \"confirmPassword\",\n                type: \"password\",\n                placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n                value: confirmPassword,\n                onChange: e => {\n                  setConfirmPassword(e.target.value);\n                  setError('');\n                },\n                onFocus: () => clearFieldError('confirmPassword'),\n                className: fieldErrors.confirmPassword ? \"border-red-500 focus-visible:ring-red-500\" : \"\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"277\",\n                \"x-component\": \"Input\",\n                \"x-id\": \"ForgotPassword_277\",\n                \"x-dynamic\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), fieldErrors.confirmPassword && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-red-500\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"286\",\n                \"x-component\": \"p\",\n                \"x-id\": \"ForgotPassword_286\",\n                \"x-dynamic\": \"true\",\n                children: fieldErrors.confirmPassword\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              className: \"w-full bg-violet-600 hover:bg-violet-700\",\n              disabled: loading,\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"289\",\n              \"x-component\": \"Button\",\n              \"x-id\": \"ForgotPassword_289\",\n              \"x-dynamic\": \"true\",\n              children: [loading && /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"w-4 h-4 mr-2 animate-spin\",\n                \"x-file-name\": \"ForgotPassword\",\n                \"x-line-number\": \"290\",\n                \"x-component\": \"Loader2\",\n                \"x-id\": \"ForgotPassword_290\",\n                \"x-dynamic\": \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 31\n              }, this), \"Reset Password\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), step === 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4\",\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"298\",\n            \"x-component\": \"div\",\n            \"x-id\": \"ForgotPassword_298\",\n            \"x-dynamic\": \"false\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-muted-foreground mb-4\",\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"299\",\n              \"x-component\": \"p\",\n              \"x-id\": \"ForgotPassword_299\",\n              \"x-dynamic\": \"false\",\n              children: \"Your password has been successfully reset. You can now log in with your new credentials.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              className: \"w-full\",\n              onClick: () => navigate('/login'),\n              \"x-file-name\": \"ForgotPassword\",\n              \"x-line-number\": \"302\",\n              \"x-component\": \"Button\",\n              \"x-id\": \"ForgotPassword_302\",\n              \"x-dynamic\": \"false\",\n              children: \"Return to Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this), step < 4 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 text-center\",\n            \"x-file-name\": \"ForgotPassword\",\n            \"x-line-number\": \"310\",\n            \"x-component\": \"div\",\n            \"x-id\": \"ForgotPassword_310\",\n            \"x-dynamic\": \"false\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/login\",\n              className: \"inline-flex items-center text-sm text-muted-foreground hover:text-violet-600 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 19\n              }, this), \"Back to log in\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n};\n_s(ForgotPassword, \"ggRGzRWvDoXUc/EeWTghfB2k7cw=\", false, function () {\n  return [useNavigate, useToast];\n});\n_c = ForgotPassword;\nexport default ForgotPassword;\nvar _c;\n$RefreshReg$(_c, \"ForgotPassword\");","map":{"version":3,"names":["React","useState","Link","useNavigate","motion","AnimatePresence","Button","Input","Label","Card","CardContent","CardDescription","CardHeader","CardTitle","supabase","ArrowLeft","KeyRound","Loader2","Mail","CheckCircle2","AlertCircle","useToast","InputOTP","InputOTPGroup","InputOTPSlot","jsxDEV","_jsxDEV","ForgotPassword","_s","step","setStep","loading","setLoading","email","setEmail","otp","setOtp","password","setPassword","confirmPassword","setConfirmPassword","error","setError","fieldErrors","setFieldErrors","navigate","toast","clearFieldError","field","prev","handleSendOtp","e","preventDefault","trim","emailRegex","test","data","emailExists","rpcError","rpc","email_to_check","auth","resetPasswordForEmail","title","description","message","handleVerifyOtp","length","verifyOtp","token","type","handleUpdatePassword","isValid","newErrors","updateUser","signOut","localStorage","clear","setTimeout","className","children","div","initial","opacity","y","animate","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","noValidate","htmlFor","id","placeholder","value","onChange","target","onFocus","disabled","maxLength","val","index","variant","onClick","to","_c","$RefreshReg$"],"sources":["/workspaces/TrustFlow-App/frontend/src/pages/ForgotPassword.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { supabase } from '@/lib/supabase'; // Direct import for manual OTP handling\nimport { ArrowLeft, KeyRound, Loader2, Mail, CheckCircle2, AlertCircle } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport {\n  InputOTP,\n  InputOTPGroup,\n  InputOTPSlot,\n} from \"@/components/ui/input-otp\";\n\nconst ForgotPassword = () => {\n  // --- STATE ---\n  const [step, setStep] = useState(1); // 1: Email, 2: OTP, 3: New Password, 4: Success\n  const [loading, setLoading] = useState(false);\n  \n  // Data State\n  const [email, setEmail] = useState('');\n  const [otp, setOtp] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  // Error State\n  const [error, setError] = useState(''); // General error text\n  const [fieldErrors, setFieldErrors] = useState({\n    email: '',\n    otp: '',\n    password: '',\n    confirmPassword: ''\n  });\n\n  const navigate = useNavigate();\n  const { toast } = useToast();\n\n  // --- HELPERS ---\n  const clearFieldError = (field) => {\n    setFieldErrors(prev => ({ ...prev, [field]: '' }));\n    setError('');\n  };\n\n  // --- STEP 1: SEND OTP ---\n  const handleSendOtp = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    // Validate Email\n    if (!email.trim()) {\n      setFieldErrors(prev => ({ ...prev, email: \"Email is required.\" }));\n      return;\n    }\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      setFieldErrors(prev => ({ ...prev, email: \"Please enter a valid email.\" }));\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // 1. Pre-check: Does email exist?\n      const { data: emailExists, error: rpcError } = await supabase.rpc('check_email_exists', { \n        email_to_check: email \n      });\n\n      if (rpcError) throw rpcError;\n\n      if (!emailExists) {\n        // Stop here if email not found (Security decision: Explicit error vs Silent fail)\n        // User requested: \"stays on that interface\"\n        setFieldErrors(prev => ({ ...prev, email: \"This email is not registered.\" }));\n        setLoading(false);\n        return;\n      }\n\n      // 2. Send Password Reset OTP\n      const { error } = await supabase.auth.resetPasswordForEmail(email);\n      if (error) throw error;\n\n      setStep(2); // Move to OTP\n      toast({ title: 'OTP Sent', description: `We sent a code to ${email}` });\n\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- STEP 2: VERIFY OTP ---\n  const handleVerifyOtp = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    if (otp.length < 6) {\n      setFieldErrors(prev => ({ ...prev, otp: \"Please enter the 6-digit code.\" }));\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Verify OTP (Type: recovery)\n      const { data, error } = await supabase.auth.verifyOtp({\n        email,\n        token: otp,\n        type: 'recovery',\n      });\n\n      if (error) throw error;\n\n      // OTP Correct -> Move to New Password\n      setStep(3); \n\n    } catch (error) {\n      // Handle Invalid OTP specific error\n      setFieldErrors(prev => ({ ...prev, otp: \"Invalid or expired OTP.\" }));\n      setError(\"Invalid code. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- STEP 3: UPDATE PASSWORD ---\n  // --- STEP 3: UPDATE PASSWORD ---\n  const handleUpdatePassword = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    // Validation\n    let isValid = true;\n    const newErrors = { password: '', confirmPassword: '' };\n\n    if (password.length < 6) {\n      newErrors.password = \"Password must be at least 6 characters.\";\n      isValid = false;\n    }\n    if (password !== confirmPassword) {\n      newErrors.confirmPassword = \"Passwords do not match.\";\n      isValid = false;\n    }\n\n    if (!isValid) {\n      setFieldErrors(prev => ({ ...prev, ...newErrors }));\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // 1. Update the password (requires the current temporary session)\n      const { error } = await supabase.auth.updateUser({ password: password });\n      if (error) throw error;\n\n      // --- THE FIX: KILL THE SESSION IMMEDIATELY ---\n      // This ensures they are NOT logged in when they hit the Login page.\n      await supabase.auth.signOut();\n      localStorage.clear(); // Wipe any lingering tokens\n\n      // 2. Show Success UI\n      setStep(4);\n      \n      // 3. Redirect to Login (User is now anonymous again)\n      setTimeout(() => {\n        navigate('/login');\n      }, 5000);\n\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-50 via-background to-indigo-50 dark:from-violet-950/20 dark:via-background dark:to-indigo-950/20 p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"w-full max-w-md\"\n      >\n        <Card className=\"backdrop-blur-sm bg-white/80 dark:bg-gray-900/80 shadow-xl border-violet-100 dark:border-violet-900/50\">\n          <CardHeader className=\"text-center\">\n            <div className=\"w-12 h-12 bg-violet-100 dark:bg-violet-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n              {step === 4 ? <CheckCircle2 className=\"w-6 h-6 text-green-600\" /> : <KeyRound className=\"w-6 h-6 text-violet-600\" />}\n            </div>\n            <CardTitle className=\"text-2xl\">\n              {step === 1 && \"Forgot password?\"}\n              {step === 2 && \"Enter OTP\"}\n              {step === 3 && \"Reset Password\"}\n              {step === 4 && \"Password Updated\"}\n            </CardTitle>\n            <CardDescription>\n              {step === 1 && \"No worries, we'll send you reset instructions.\"}\n              {step === 2 && `Enter the code sent to ${email}`}\n              {step === 3 && \"Create a new strong password.\"}\n              {step === 4 && \"Redirecting to login in 5 seconds...\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            \n            {/* STEP 1: EMAIL INPUT */}\n            {step === 1 && (\n              <form onSubmit={handleSendOtp} className=\"space-y-4\" noValidate>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\" className={fieldErrors.email ? \"text-red-500\" : \"\"}>Email</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"Enter your email\"\n                    value={email}\n                    onChange={(e) => { setEmail(e.target.value); setError(''); }}\n                    onFocus={() => clearFieldError('email')}\n                    className={fieldErrors.email ? \"border-red-500 focus-visible:ring-red-500\" : \"\"}\n                  />\n                  {fieldErrors.email && <p className=\"text-xs text-red-500\">{fieldErrors.email}</p>}\n                </div>\n                \n                <Button type=\"submit\" className=\"w-full bg-violet-600 hover:bg-violet-700\" disabled={loading}>\n                  {loading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                  Send Reset Code\n                </Button>\n              </form>\n            )}\n\n            {/* STEP 2: OTP INPUT */}\n            {step === 2 && (\n              <form onSubmit={handleVerifyOtp} className=\"space-y-6\">\n                <div className=\"flex justify-center\">\n                  <InputOTP\n                    maxLength={6}\n                    value={otp}\n                    onChange={(val) => { setOtp(val); setError(''); clearFieldError('otp'); }}\n                  >\n                    <InputOTPGroup className={fieldErrors.otp ? \"border-red-500\" : \"\"}>\n                      <InputOTPSlot index={0} className={fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\"} />\n                      <InputOTPSlot index={1} className={fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\"} />\n                      <InputOTPSlot index={2} className={fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\"} />\n                      <InputOTPSlot index={3} className={fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\"} />\n                      <InputOTPSlot index={4} className={fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\"} />\n                      <InputOTPSlot index={5} className={fieldErrors.otp ? \"border-red-500 text-red-500\" : \"\"} />\n                    </InputOTPGroup>\n                  </InputOTP>\n                </div>\n                {fieldErrors.otp && <p className=\"text-xs text-red-500 text-center font-medium\">{fieldErrors.otp}</p>}\n\n                <Button type=\"submit\" className=\"w-full bg-violet-600 hover:bg-violet-700\" disabled={loading || otp.length < 6}>\n                  {loading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                  Verify Code\n                </Button>\n              </form>\n            )}\n\n            {/* STEP 3: NEW PASSWORD */}\n            {step === 3 && (\n              <form onSubmit={handleUpdatePassword} className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"password\" className={fieldErrors.password ? \"text-red-500\" : \"\"}>New Password</Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"••••••••\"\n                    value={password}\n                    onChange={(e) => { setPassword(e.target.value); setError(''); }}\n                    onFocus={() => clearFieldError('password')}\n                    className={fieldErrors.password ? \"border-red-500 focus-visible:ring-red-500\" : \"\"}\n                  />\n                  {fieldErrors.password && <p className=\"text-xs text-red-500\">{fieldErrors.password}</p>}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"confirmPassword\" className={fieldErrors.confirmPassword ? \"text-red-500\" : \"\"}>Confirm Password</Label>\n                  <Input\n                    id=\"confirmPassword\"\n                    type=\"password\"\n                    placeholder=\"••••••••\"\n                    value={confirmPassword}\n                    onChange={(e) => { setConfirmPassword(e.target.value); setError(''); }}\n                    onFocus={() => clearFieldError('confirmPassword')}\n                    className={fieldErrors.confirmPassword ? \"border-red-500 focus-visible:ring-red-500\" : \"\"}\n                  />\n                  {fieldErrors.confirmPassword && <p className=\"text-xs text-red-500\">{fieldErrors.confirmPassword}</p>}\n                </div>\n\n                <Button type=\"submit\" className=\"w-full bg-violet-600 hover:bg-violet-700\" disabled={loading}>\n                  {loading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                  Reset Password\n                </Button>\n              </form>\n            )}\n\n            {/* STEP 4: SUCCESS */}\n            {step === 4 && (\n              <div className=\"text-center py-4\">\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Your password has been successfully reset. You can now log in with your new credentials.\n                </p>\n                <Button variant=\"outline\" className=\"w-full\" onClick={() => navigate('/login')}>\n                  Return to Login\n                </Button>\n              </div>\n            )}\n\n            {/* BACK TO LOGIN LINK (Only for steps 1-3) */}\n            {step < 4 && (\n              <div className=\"mt-6 text-center\">\n                <Link \n                  to=\"/login\" \n                  className=\"inline-flex items-center text-sm text-muted-foreground hover:text-violet-600 transition-colors\"\n                >\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Back to log in\n                </Link>\n              </div>\n            )}\n\n          </CardContent>\n        </Card>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default ForgotPassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}